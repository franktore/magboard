{"ast":null,"code":"var _jsxFileName = \"/home/fsat/repos/magboard/frontend/src/editors/PitchEdit.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport PitchFutsal from '../pitch/PitchFutsal';\nimport DrawMode from '../pitch/DrawMode';\nimport { withStyles } from '@material-ui/core/styles';\nimport PlayerEdit from './PlayerEdit';\nimport BallEdit from './BallEdit';\nimport SquareEdit from './SquareEdit';\nimport EllipseEdit from './EllipseEdit';\nimport LineEdit from './LineEdit';\nimport TextEdit from './TextEdit';\nimport PlayerDialog from './PlayerDialog'; // this is for offset from toolbar and default class\n\nconst styles = theme => ({\n  offset: {\n    paddingTop: theme.mixins.toolbar.minHeight\n  }\n}); // define object types for mouse dragging\n\n\nconst DragObject = {\n  None: -1,\n  Player: 0,\n  Ball: 1,\n  Cone: 2,\n  Goal: 3,\n  EditTopLeft: 4,\n  EditTopRight: 5,\n  EditBottomLeft: 6,\n  EditBottomRight: 7,\n  EditMove: 8,\n  EditRotate: 9,\n  EditLineP1: 10,\n  EditLineC1: 11,\n  EditLineC2: 12,\n  EditLineP2: 13\n}; // defines way to check draggable object\n\nconst DragObjectCheck = [{\n  prefix: \"pl\",\n  removePrefix: false,\n  typ: DragObject.Player\n}, {\n  prefix: \"bl\",\n  removePrefix: false,\n  typ: DragObject.Ball\n}, {\n  prefix: \"edit-tl-\",\n  removePrefix: true,\n  typ: DragObject.EditTopLeft\n}, {\n  prefix: \"edit-tr-\",\n  removePrefix: true,\n  typ: DragObject.EditTopRight\n}, {\n  prefix: \"edit-bl-\",\n  removePrefix: true,\n  typ: DragObject.EditBottomLeft\n}, {\n  prefix: \"edit-br-\",\n  removePrefix: true,\n  typ: DragObject.EditBottomRight\n}, {\n  prefix: \"edit-mv-\",\n  removePrefix: true,\n  typ: DragObject.EditMove\n}, {\n  prefix: \"edit-rt-\",\n  removePrefix: true,\n  typ: DragObject.EditRotate\n}, {\n  prefix: \"edit-l1-\",\n  removePrefix: true,\n  typ: DragObject.EditLineP1\n}, {\n  prefix: \"edit-l2-\",\n  removePrefix: true,\n  typ: DragObject.EditLineC1\n}, {\n  prefix: \"edit-l3-\",\n  removePrefix: true,\n  typ: DragObject.EditLineC2\n}, {\n  prefix: \"edit-l4-\",\n  removePrefix: true,\n  typ: DragObject.EditLineP2\n}];\n\nclass PitchEdit extends Component {\n  constructor(props) {\n    super(props);\n    this._editRef = /*#__PURE__*/React.createRef(); // reference to editor container\n\n    this._bgRef = /*#__PURE__*/React.createRef(); // background reference to get client size of pitch for editing\n\n    this._playerDialogRef = /*#__PURE__*/React.createRef(); // edit player dialog reference\n\n    this._orgWidth = this.props.viewBoxRight - this.props.viewBoxLeft;\n    this._orgHeight = this.props.viewBoxBottom - this.props.viewBoxTop;\n    this._pitch = this.props.pitch; // mouse drag init\n\n    this._dragNode = null;\n    this._dragObjectType = DragObject.None;\n    this._mouseX = 0;\n    this._mouseY = 0; // add events\n\n    this.hContextMenu = this.hContextMenu.bind(this);\n    this.hMouseDown = this.hMouseDown.bind(this);\n    this.hMouseUp = this.hMouseUp.bind(this);\n    this.hMouseMove = this.hMouseMove.bind(this);\n    this.textEditDone = this.textEditDone.bind(this); // callbacks\n\n    this.playerEditDone = this.playerEditDone.bind(this);\n  }\n\n  getScale() {\n    const box = this._bgRef.current.getBoundingClientRect();\n\n    return {\n      X: this._orgWidth / box.width,\n      Y: this._orgHeight / box.height\n    };\n  }\n\n  getRealPosition(e) {\n    let scale = this.getScale(); // TODO: reconsider scale\n\n    let box = this._bgRef.current.getBoundingClientRect();\n\n    let x = e.clientX - box.left; //x position within the element.\n\n    let y = e.clientY - box.top; //y position within the element.\n\n    let realPosition = {\n      X: x * scale.X,\n      Y: y * scale.Y\n    };\n    return realPosition;\n  }\n\n  resetMouseDrag(e) {\n    this._mouseX = e.clientX;\n    this._mouseY = e.clientY;\n  }\n\n  isDragStarted(e) {\n    if (0 !== e.button) {\n      return false;\n    }\n\n    if (!e.target.classList.contains('draggable')) {\n      return false;\n    }\n\n    this._dragNode = e.target.getAttribute(\"data-ref\");\n\n    if (null === this._dragNode) {\n      return false;\n    }\n\n    this.resetMouseDrag(e); // get drag object\n\n    this._dragObjectType = DragObject.None;\n\n    for (const chk of DragObjectCheck) {\n      if (!this._dragNode.startsWith(chk.prefix)) {\n        continue;\n      }\n\n      this._dragObjectType = chk.typ;\n\n      if (chk.removePrefix) {\n        this._dragNode = this._dragNode.replace(chk.prefix, \"\");\n      }\n\n      return true;\n    }\n\n    return false;\n  }\n\n  playerEditStarted(editNode) {\n    const editPlayer = this.props.pitch.playerEditStart(editNode);\n\n    if (null === editPlayer) {\n      return false;\n    }\n\n    this._playerDialogRef.current.openDialog(editPlayer);\n\n    return true;\n  } // player edit dialog callback\n\n\n  playerEditDone(player) {\n    this.props.pitch.playerEditDone(player);\n  }\n\n  objectDrag(posX, posY, deltaX, deltaY, snap) {\n    const p = this.props.pitch;\n\n    switch (this._dragObjectType) {\n      case DragObject.Player:\n        p.playerMove(this._dragNode, deltaX, deltaY);\n        break;\n\n      case DragObject.Ball:\n        p.ballMove(this._dragNode, deltaX, deltaY);\n        break;\n\n      case DragObject.EditTopLeft:\n        p.editTopLeft(this._dragNode, deltaX, deltaY);\n        break;\n\n      case DragObject.EditTopRight:\n        p.editTopRight(this._dragNode, deltaX, deltaY);\n        break;\n\n      case DragObject.EditBottomLeft:\n        p.editBottomLeft(this._dragNode, deltaX, deltaY);\n        break;\n\n      case DragObject.EditBottomRight:\n        p.editBottomRight(this._dragNode, deltaX, deltaY);\n        break;\n\n      case DragObject.EditMove:\n        p.editMove(this._dragNode, deltaX, deltaY);\n        break;\n\n      case DragObject.EditRotate:\n        p.editRotate(this._dragNode, posX, posY, snap);\n        break;\n\n      case DragObject.EditLineP1:\n        p.lineEdit('p1', this._dragNode, deltaX, deltaY);\n        break;\n\n      case DragObject.EditLineC1:\n        p.lineEdit('c1', this._dragNode, deltaX, deltaY);\n        break;\n\n      case DragObject.EditLineC2:\n        p.lineEdit('c2', this._dragNode, deltaX, deltaY);\n        break;\n\n      case DragObject.EditLineP2:\n        p.lineEdit('p2', this._dragNode, deltaX, deltaY);\n        break;\n\n      default:\n        console.log(\"Invalid drag object type\", this._dragObjectType, this._dragNode);\n        break;\n    }\n  }\n\n  hContextMenu(e) {\n    if (this.props.drawMode.mode !== 'select') {\n      return;\n    }\n\n    let id = e.target.getAttribute(\"data-ref\");\n\n    if (null === id) {\n      return;\n    }\n\n    const p = this.props.pitch;\n\n    if (this.playerEditStarted(id)) {\n      e.preventDefault();\n      return;\n    }\n\n    if (p.squareEditStart(id)) {\n      e.preventDefault();\n      return;\n    }\n\n    if (p.ellipseEditStart(id)) {\n      e.preventDefault();\n      return;\n    }\n\n    if (p.lineEditStart(id)) {\n      e.preventDefault();\n      return;\n    }\n\n    if (p.textEditStart(id)) {\n      e.preventDefault();\n      return;\n    }\n  }\n\n  hMouseDown(e) {\n    let pos = this.getRealPosition(e);\n    const dm = this.props.drawMode;\n    const p = this.props.pitch;\n\n    switch (dm.mode) {\n      case 'line':\n        e.preventDefault();\n        this._dragNode = p.lineCreate(pos.X, pos.Y, dm.color, dm.lineArrowStart, dm.lineArrowEnd, dm.lineDashed);\n        break;\n\n      case 'square':\n        e.preventDefault();\n        this._dragNode = p.squareCreate(pos.X, pos.Y, dm.color, dm.lineDashed);\n        break;\n\n      case 'ellipse':\n        e.preventDefault();\n        this._dragNode = p.ellipseCreate(pos.X, pos.Y, dm.color, dm.lineDashed);\n        break;\n\n      case 'text':\n        e.preventDefault();\n        this._dragNode = p.textCreate(pos.X, pos.Y, dm.color, dm.textSize);\n        break;\n\n      case 'select':\n      default:\n        if (this.isDragStarted(e)) {\n          e.preventDefault();\n          return;\n        }\n\n        break;\n    }\n  }\n\n  hMouseUp(e) {\n    e.preventDefault();\n    const p = this.props.pitch;\n    let pos = this.getRealPosition(e);\n    let isShift = e.getModifierState(\"Shift\");\n\n    switch (this.props.drawMode.mode) {\n      case 'line':\n        p.lineCleanup();\n        break;\n\n      case 'square':\n        p.squareCleanup();\n        break;\n\n      case 'ellipse':\n        p.ellipseCleanup();\n        break;\n\n      case 'text':\n        break;\n\n      case 'select':\n      default:\n        let scale = this.getScale();\n        let deltaX = (e.clientX - this._mouseX) * scale.X;\n        let deltaY = (e.clientY - this._mouseY) * scale.Y;\n        this.resetMouseDrag(e);\n        this.objectDrag(pos.X, pos.Y, deltaX, deltaY, isShift);\n        break;\n    } // Reset editing\n\n\n    if (0 === e.button && this._dragObjectType === DragObject.None) {\n      p.endAllEdits();\n    }\n\n    this._dragNode = null;\n    this._dragObjectType = DragObject.None;\n  }\n\n  hMouseMove(e) {\n    if (null == this._dragNode) {\n      return;\n    }\n\n    const p = this.props.pitch;\n    e.preventDefault();\n    let pos = this.getRealPosition(e);\n    let isShift = e.getModifierState(\"Shift\");\n\n    switch (this.props.drawMode.mode) {\n      case 'line':\n        p.lineResize(this._dragNode, pos.X, pos.Y);\n        break;\n\n      case 'square':\n        p.squareResize(this._dragNode, pos.X, pos.Y, isShift);\n        break;\n\n      case 'ellipse':\n        p.ellipseResize(this._dragNode, pos.X, pos.Y, isShift);\n        break;\n\n      case 'text':\n        break;\n\n      case 'select':\n      default:\n        let scale = this.getScale();\n        let deltaX = (e.clientX - this._mouseX) * scale.X;\n        let deltaY = (e.clientY - this._mouseY) * scale.Y;\n        this.resetMouseDrag(e);\n        this.objectDrag(pos.X, pos.Y, deltaX, deltaY, isShift);\n        break;\n    }\n  }\n\n  textEditDone(id, text, bx, by, bwidth, bheight) {\n    this.props.pitch.textEditDone(id, text, bx, by, bwidth, bheight);\n  } // return current SVG in editor\n  // TODO: Cleanup unused players and balls\n\n\n  getSVG() {\n    return {\n      width: this._orgWidth,\n      height: this._orgHeight,\n      svgText: this._editRef.current.children[0].outerHTML\n    };\n  }\n\n  renderPlayers(players) {\n    return players.map((pl, index) => {\n      return /*#__PURE__*/React.createElement(PlayerEdit, {\n        key: index.toString(),\n        player: pl,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 5\n        }\n      });\n    });\n  }\n\n  renderBalls(balls) {\n    return balls.map((b, index) => {\n      return /*#__PURE__*/React.createElement(BallEdit, {\n        key: index.toString(),\n        ball: b,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 5\n        }\n      });\n    });\n  }\n\n  renderSquares(squares) {\n    return squares.map((s, index) => {\n      return /*#__PURE__*/React.createElement(SquareEdit, {\n        key: index.toString(),\n        square: s,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 5\n        }\n      });\n    });\n  }\n\n  renderEllipses(ellipses) {\n    return ellipses.map((el, index) => {\n      return /*#__PURE__*/React.createElement(EllipseEdit, {\n        key: index.toString(),\n        ellipse: el,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 5\n        }\n      });\n    });\n  }\n\n  renderLines(lines) {\n    return lines.map((l, index) => {\n      return /*#__PURE__*/React.createElement(LineEdit, {\n        key: index.toString(),\n        line: l,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 5\n        }\n      });\n    });\n  }\n\n  renderTexts(texts) {\n    return texts.map((tx, index) => {\n      return /*#__PURE__*/React.createElement(TextEdit, {\n        key: index.toString(),\n        text: tx,\n        onEditDone: this.textEditDone,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 5\n        }\n      });\n    });\n  }\n\n  renderPitchOverlay() {\n    const o = this.props.pitch.overlaySize();\n\n    if (null === o) {\n      return null;\n    }\n\n    const posX = (this._orgWidth - o.width) / 2;\n    const posY = (this._orgHeight - o.height) / 2;\n    const transform = 'translate(' + posX + ' ' + posY + ')';\n    return /*#__PURE__*/React.createElement(\"rect\", {\n      width: o.width,\n      height: o.height,\n      transform: transform,\n      fill: \"none\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 11\n      }\n    });\n  }\n\n  generatePicthStyles() {\n    const colors = this.props.drawMode.colorOptions.map((col, index) => {\n      return '.pc' + index + ' { fill: ' + col + '; stroke: ' + col + '; }';\n    });\n    return colors.concat(['.bc0 { fill: #ffa500; }', '.bc1 { fill: #cc3333; }', '.bc2 { fill: #222333; }', '.bc3 { fill: #0000ff; }', '.bc4 { fill: #ffffff; }', '.bc4 svg { fill: #000000; }', '#texts { font-family: sans-serif; font-size: 10em; cursor: default; user-select: none; }', '.txt0 text { font-size: 0.5em; }', '.txt1 text { font-size: 0.8em; }', '.txt2 text { font-size: 1em; }', '.txt3 text { font-size: 1.5em; }', '.txt4 text { font-size: 2em; }', '.player { pointer-events: none; }', '.player text { font-family: sans-serif; fill: black; }', '.player text.number { fill: white; }', '.dashed { stroke-dasharray: 20; }', '.square { stroke-width: 8; stroke-opacity: 1; fill-opacity: 0.6; }', '.ellipse { stroke-width: 8; stroke-opacity: 1; fill-opacity: 0.6; }', '.line { stroke-width: 12; }', '.line path { fill: none; stroke-width: 12; }', '.draggable { cursor: move; pointer-events: all;}', '.editBox { fill: none; stroke-width: 8; stroke-opacity: 1; }', '.editTransparent { fill: none; stroke-width: 0; }', '.editCorner { fill: red; stroke-width: 0; stroke-opacity: 1; }']);\n  }\n\n  render() {\n    const viewBox = this.props.viewBoxLeft.toString() + ' ' + this.props.viewBoxTop.toString() + ' ' + this.props.viewBoxRight.toString() + ' ' + this.props.viewBoxBottom.toString(); // default class is full screen width and height with padding for menu height\n\n    const pitchClasses = \"pitch \" + this.props.classes.offset; // Calculate pitch position in viewBox\n\n    const pitchLeft = (this._orgWidth - 4000) / 2; // Goals are relative to pitch no need to take them in calc\n\n    const pitchTop = (this._orgHeight - 2000) / 2;\n    const pitchTransform = 'translate(' + pitchLeft + ' ' + pitchTop + ')'; // calculate players position in viewbox\n\n    const playersLeft = pitchLeft;\n    const playersTop = pitchTop + 2000 + 50;\n    const playersTransform = 'translate(' + playersLeft + ' ' + playersTop + ')'; // calculate balls position in viewBox\n\n    const ballsLeft = pitchLeft + 1050;\n    const ballsTop = pitchTop + 2000 + 100;\n    const ballsTransform = 'translate(' + ballsLeft + ' ' + ballsTop + ')'; // \"translate(1200 2210)\"\n\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      ref: this._editRef,\n      className: pitchClasses,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: viewBox,\n      onContextMenu: this.hContextMenu,\n      onMouseDown: this.hMouseDown,\n      onMouseUp: this.hMouseUp,\n      onMouseMove: this.hMouseMove,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"style\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 6\n      }\n    }, this.generatePicthStyles()), /*#__PURE__*/React.createElement(\"pattern\", {\n      id: \"goal-net\",\n      x: \"0\",\n      y: \"0\",\n      width: \"20\",\n      height: \"20\",\n      stroke: \"black\",\n      patternUnits: \"userSpaceOnUse\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"line\", {\n      x1: \"0\",\n      x2: \"20\",\n      y1: \"0\",\n      y2: \"20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"line\", {\n      x1: \"20\",\n      x2: \"00\",\n      y1: \"0\",\n      y2: \"20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 7\n      }\n    })), /*#__PURE__*/React.createElement(\"marker\", {\n      id: \"arrowEnd\",\n      markerWidth: \"10\",\n      markerHeight: \"10\",\n      refX: \"0\",\n      refY: \"3\",\n      orient: \"auto\",\n      markerUnits: \"strokeWidth\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      d: \"M0,0 L0,6 L9,3 z\",\n      fill: \"#f00\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 7\n      }\n    })), /*#__PURE__*/React.createElement(\"marker\", {\n      id: \"arrowStart\",\n      markerWidth: \"10\",\n      markerHeight: \"10\",\n      refX: \"0\",\n      refY: \"3\",\n      orient: \"auto\",\n      markerUnits: \"strokeWidth\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      d: \"M9,0 L9,6 L0,3 z\",\n      fill: \"#f00\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 7\n      }\n    })), /*#__PURE__*/React.createElement(\"g\", {\n      id: \"background\",\n      ref: this._bgRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"rect\", {\n      width: this._orgWidth,\n      height: this._orgHeight,\n      fill: \"#b7b7b7\",\n      fillOpacity: \"0.5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 7\n      }\n    })), /*#__PURE__*/React.createElement(\"g\", {\n      id: \"pitch\",\n      transform: pitchTransform,\n      fill: \"#0280c6\",\n      stroke: \"white\",\n      strokeWidth: \"8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"rect\", {\n      width: \"4000\",\n      height: \"2000\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"line\", {\n      x1: \"2000\",\n      x2: \"2000\",\n      y1: \"0\",\n      y2: \"2000\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 481,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"circle\", {\n      r: \"300\",\n      cx: \"2000\",\n      cy: \"1000\",\n      fill: \"none\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"circle\", {\n      r: \"12\",\n      cx: \"2000\",\n      cy: \"1000\",\n      fill: \"white\",\n      strokeWidth: \"0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 483,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"g\", {\n      id: \"corner_marks\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      fill: \"none\",\n      d: \"M25,0 a25,25 0 0,1 -25,25\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      fill: \"none\",\n      d: \"M4000,25 a25,25 0 0,1 -25,-25\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      fill: \"none\",\n      d: \"M0,1975 a25,25 0 0,1 25,25\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      fill: \"none\",\n      d: \"M3975,2000 a25,25 0 0,1 25,-25\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 8\n      }\n    })), /*#__PURE__*/React.createElement(\"g\", {\n      id: \"substitition-zones\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"line\", {\n      x1: \"1000\",\n      x2: \"1000\",\n      y1: \"-48\",\n      y2: \"32\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"line\", {\n      x1: \"1500\",\n      x2: \"1500\",\n      y1: \"-48\",\n      y2: \"32\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"line\", {\n      x1: \"2500\",\n      x2: \"2500\",\n      y1: \"-48\",\n      y2: \"32\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"line\", {\n      x1: \"3000\",\n      x2: \"3000\",\n      y1: \"-48\",\n      y2: \"32\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 8\n      }\n    })), /*#__PURE__*/React.createElement(\"g\", {\n      id: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"line\", {\n      x1: \"500\",\n      x2: \"500\",\n      y1: \"980\",\n      y2: \"1020\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"line\", {\n      x1: \"600\",\n      x2: \"600\",\n      y1: \"842\",\n      y2: \"1158\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 498,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"circle\", {\n      r: \"12\",\n      cx: \"600\",\n      cy: \"1000\",\n      fill: \"white\",\n      strokeWidth: \"0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      fill: \"none\",\n      d: \"M0,242 a600,600 0 0,1 600,600\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 500,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      fill: \"none\",\n      d: \"M600,1158 a600,600 0 0,1 -600,600\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 501,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"line\", {\n      x1: \"-20\",\n      x2: \"-60\",\n      y1: \"500\",\n      y2: \"500\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"line\", {\n      x1: \"-20\",\n      x2: \"-60\",\n      y1: \"1500\",\n      y2: \"1500\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"g\", {\n      id: \"goal-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 504,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"rect\", {\n      width: \"100\",\n      height: \"300\",\n      x: \"-100\",\n      y: \"850\",\n      fill: \"url(#goal-net)\",\n      stroke: \"#777777\",\n      strokeWidth: \"4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 505,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"line\", {\n      x1: \"0\",\n      x2: \"0\",\n      y1: \"850\",\n      y2: \"1150\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 506,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"line\", {\n      x1: \"0\",\n      x2: \"0\",\n      y1: \"850\",\n      y2: \"1150\",\n      stroke: \"red\",\n      strokeDasharray: \"20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 9\n      }\n    }))), /*#__PURE__*/React.createElement(\"g\", {\n      id: \"left-penalty\",\n      fill: \"white\",\n      strokeWidth: \"0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"rect\", {\n      width: \"16\",\n      height: \"16\",\n      x: \"992\",\n      y: \"492\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"circle\", {\n      r: \"12\",\n      cx: \"1000\",\n      cy: \"1000\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"rect\", {\n      width: \"16\",\n      height: \"16\",\n      x: \"992\",\n      y: \"1492\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 8\n      }\n    })), /*#__PURE__*/React.createElement(\"g\", {\n      id: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"line\", {\n      x1: \"3500\",\n      x2: \"3500\",\n      y1: \"980\",\n      y2: \"1020\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"line\", {\n      x1: \"3400\",\n      x2: \"3400\",\n      y1: \"842\",\n      y2: \"1158\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 517,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"circle\", {\n      r: \"12\",\n      cx: \"3400\",\n      cy: \"1000\",\n      fill: \"white\",\n      strokeWidth: \"0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      fill: \"none\",\n      d: \"M3400,842 a600,600 0 0,1 600,-600\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      fill: \"none\",\n      d: \"M3400,1158 a600,600 0 0,0 600,600\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"line\", {\n      x1: \"4020\",\n      x2: \"4060\",\n      y1: \"500\",\n      y2: \"500\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"line\", {\n      x1: \"4020\",\n      x2: \"4060\",\n      y1: \"1500\",\n      y2: \"1500\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"g\", {\n      id: \"goal-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 523,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"rect\", {\n      width: \"100\",\n      height: \"300\",\n      x: \"4000\",\n      y: \"850\",\n      fill: \"url(#goal-net)\",\n      stroke: \"#777777\",\n      strokeWidth: \"4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"line\", {\n      x1: \"4000\",\n      x2: \"4000\",\n      y1: \"850\",\n      y2: \"1150\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"line\", {\n      x1: \"4000\",\n      x2: \"4000\",\n      y1: \"850\",\n      y2: \"1150\",\n      stroke: \"red\",\n      strokeDasharray: \"20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 526,\n        columnNumber: 9\n      }\n    }))), /*#__PURE__*/React.createElement(\"g\", {\n      id: \"right-penalty\",\n      fill: \"white\",\n      strokeWidth: \"0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 529,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"rect\", {\n      width: \"16\",\n      height: \"16\",\n      x: \"2992\",\n      y: \"492\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 530,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"circle\", {\n      r: \"12\",\n      cx: \"3000\",\n      cy: \"1000\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 531,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(\"rect\", {\n      width: \"16\",\n      height: \"16\",\n      x: \"2992\",\n      y: \"1492\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 8\n      }\n    }))), /*#__PURE__*/React.createElement(\"g\", {\n      id: \"pitchOverlay\",\n      stroke: \"white\",\n      strokeWidth: \"8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 6\n      }\n    }, this.renderPitchOverlay()), /*#__PURE__*/React.createElement(\"g\", {\n      id: \"ellipses\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 538,\n        columnNumber: 6\n      }\n    }, this.renderEllipses(this.props.pitch.ellipses)), /*#__PURE__*/React.createElement(\"g\", {\n      id: \"squares\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 6\n      }\n    }, this.renderSquares(this.props.pitch.squares)), /*#__PURE__*/React.createElement(\"g\", {\n      id: \"players\",\n      transform: playersTransform,\n      fontSize: \"50\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 540,\n        columnNumber: 6\n      }\n    }, this.renderPlayers(this.props.pitch.players)), /*#__PURE__*/React.createElement(\"g\", {\n      id: \"balls\",\n      transform: ballsTransform,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 6\n      }\n    }, this.renderBalls(this.props.pitch.balls)), /*#__PURE__*/React.createElement(\"g\", {\n      id: \"lines\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 6\n      }\n    }, this.renderLines(this.props.pitch.lines)), /*#__PURE__*/React.createElement(\"g\", {\n      id: \"texts\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 6\n      }\n    }, this.renderTexts(this.props.pitch.texts)))), /*#__PURE__*/React.createElement(PlayerDialog, {\n      ref: this._playerDialogRef,\n      onEditDone: this.playerEditDone,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 4\n      }\n    }));\n  }\n\n}\n\nPitchEdit.defaultProps = {\n  pitch: null,\n  drawMode: null,\n  viewBoxLeft: 0,\n  viewBoxTop: 0,\n  viewBoxRight: 4500,\n  viewBoxBottom: 2500\n};\nPitchEdit.propTypes = {\n  pitch: PropTypes.instanceOf(PitchFutsal),\n  drawMode: PropTypes.instanceOf(DrawMode),\n  viewBoxLeft: PropTypes.number,\n  viewBoxTop: PropTypes.number,\n  viewBoxRight: PropTypes.number,\n  viewBoxBottom: PropTypes.number\n};\nexport default withStyles(styles, {\n  withTheme: true\n})(PitchEdit);","map":{"version":3,"sources":["/home/fsat/repos/magboard/frontend/src/editors/PitchEdit.js"],"names":["React","Component","PropTypes","PitchFutsal","DrawMode","withStyles","PlayerEdit","BallEdit","SquareEdit","EllipseEdit","LineEdit","TextEdit","PlayerDialog","styles","theme","offset","paddingTop","mixins","toolbar","minHeight","DragObject","None","Player","Ball","Cone","Goal","EditTopLeft","EditTopRight","EditBottomLeft","EditBottomRight","EditMove","EditRotate","EditLineP1","EditLineC1","EditLineC2","EditLineP2","DragObjectCheck","prefix","removePrefix","typ","PitchEdit","constructor","props","_editRef","createRef","_bgRef","_playerDialogRef","_orgWidth","viewBoxRight","viewBoxLeft","_orgHeight","viewBoxBottom","viewBoxTop","_pitch","pitch","_dragNode","_dragObjectType","_mouseX","_mouseY","hContextMenu","bind","hMouseDown","hMouseUp","hMouseMove","textEditDone","playerEditDone","getScale","box","current","getBoundingClientRect","X","width","Y","height","getRealPosition","e","scale","x","clientX","left","y","clientY","top","realPosition","resetMouseDrag","isDragStarted","button","target","classList","contains","getAttribute","chk","startsWith","replace","playerEditStarted","editNode","editPlayer","playerEditStart","openDialog","player","objectDrag","posX","posY","deltaX","deltaY","snap","p","playerMove","ballMove","editTopLeft","editTopRight","editBottomLeft","editBottomRight","editMove","editRotate","lineEdit","console","log","drawMode","mode","id","preventDefault","squareEditStart","ellipseEditStart","lineEditStart","textEditStart","pos","dm","lineCreate","color","lineArrowStart","lineArrowEnd","lineDashed","squareCreate","ellipseCreate","textCreate","textSize","isShift","getModifierState","lineCleanup","squareCleanup","ellipseCleanup","endAllEdits","lineResize","squareResize","ellipseResize","text","bx","by","bwidth","bheight","getSVG","svgText","children","outerHTML","renderPlayers","players","map","pl","index","toString","renderBalls","balls","b","renderSquares","squares","s","renderEllipses","ellipses","el","renderLines","lines","l","renderTexts","texts","tx","renderPitchOverlay","o","overlaySize","transform","generatePicthStyles","colors","colorOptions","col","concat","render","viewBox","pitchClasses","classes","pitchLeft","pitchTop","pitchTransform","playersLeft","playersTop","playersTransform","ballsLeft","ballsTop","ballsTransform","defaultProps","propTypes","instanceOf","number","withTheme"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport PitchFutsal from '../pitch/PitchFutsal';\nimport DrawMode from '../pitch/DrawMode';\nimport { withStyles } from '@material-ui/core/styles';\nimport PlayerEdit from './PlayerEdit'\nimport BallEdit from './BallEdit'\nimport SquareEdit from './SquareEdit'\nimport EllipseEdit from './EllipseEdit'\nimport LineEdit from './LineEdit'\nimport TextEdit from './TextEdit'\nimport PlayerDialog from './PlayerDialog'\n\n// this is for offset from toolbar and default class\nconst styles = theme => ({\n\toffset: {\n\t\tpaddingTop: theme.mixins.toolbar.minHeight,\n\t}\n})\n\n// define object types for mouse dragging\nconst DragObject = {\n\tNone: -1,\n\tPlayer: 0,\n\tBall: 1,\n\tCone: 2,\n\tGoal: 3,\n\tEditTopLeft: 4,\n\tEditTopRight: 5,\n\tEditBottomLeft: 6,\n\tEditBottomRight: 7,\n\tEditMove: 8,\n\tEditRotate: 9,\n\tEditLineP1: 10,\n\tEditLineC1: 11,\n\tEditLineC2: 12,\n\tEditLineP2: 13\n};\n\n// defines way to check draggable object\nconst DragObjectCheck = [\n\t{prefix: \"pl\", removePrefix: false, typ:  DragObject.Player},\n\t{prefix: \"bl\", removePrefix: false, typ:  DragObject.Ball},\n\t{prefix: \"edit-tl-\", removePrefix: true, typ:  DragObject.EditTopLeft},\n\t{prefix: \"edit-tr-\", removePrefix: true, typ:  DragObject.EditTopRight},\n\t{prefix: \"edit-bl-\", removePrefix: true, typ:  DragObject.EditBottomLeft},\n\t{prefix: \"edit-br-\", removePrefix: true, typ:  DragObject.EditBottomRight},\n\t{prefix: \"edit-mv-\", removePrefix: true, typ:  DragObject.EditMove},\n\t{prefix: \"edit-rt-\", removePrefix: true, typ:  DragObject.EditRotate},\n\t{prefix: \"edit-l1-\", removePrefix: true, typ:  DragObject.EditLineP1},\n\t{prefix: \"edit-l2-\", removePrefix: true, typ:  DragObject.EditLineC1},\n\t{prefix: \"edit-l3-\", removePrefix: true, typ:  DragObject.EditLineC2},\n\t{prefix: \"edit-l4-\", removePrefix: true, typ:  DragObject.EditLineP2}\n];\n\n\nclass PitchEdit extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis._editRef = React.createRef();\t// reference to editor container\n\t\tthis._bgRef = React.createRef();\t// background reference to get client size of pitch for editing\n\t\tthis._playerDialogRef = React.createRef(); // edit player dialog reference\n\t\tthis._orgWidth = this.props.viewBoxRight - this.props.viewBoxLeft;\n\t\tthis._orgHeight = this.props.viewBoxBottom - this.props.viewBoxTop;\n\t\tthis._pitch = this.props.pitch;\n\n\t\t// mouse drag init\n\t\tthis._dragNode = null;\n\t\tthis._dragObjectType = DragObject.None;\n\t\tthis._mouseX = 0;\n\t\tthis._mouseY = 0;\n\n\t\t// add events\n\t\tthis.hContextMenu = this.hContextMenu.bind(this);\n\t\tthis.hMouseDown = this.hMouseDown.bind(this);\n\t\tthis.hMouseUp = this.hMouseUp.bind(this);\n\t\tthis.hMouseMove = this.hMouseMove.bind(this);\n\t\tthis.textEditDone = this.textEditDone.bind(this);\n\t\t\n\t\t// callbacks\n\t\tthis.playerEditDone = this.playerEditDone.bind(this);\n\t}\n\n\tgetScale() {\n\t\tconst box = this._bgRef.current.getBoundingClientRect();\n\t\treturn {\n\t\t\tX: this._orgWidth / box.width,\n\t\t\tY: this._orgHeight / box.height\n\t\t}\n\t}\n\n\tgetRealPosition(e) {\n\t\tlet scale = this.getScale();\t// TODO: reconsider scale\n\t\tlet box = this._bgRef.current.getBoundingClientRect();\n \t\tlet x = e.clientX - box.left;\t//x position within the element.\n  \t\tlet y = e.clientY - box.top; \t//y position within the element.\n\t\tlet realPosition = {\n\t\t\tX: x * scale.X,\n\t\t\tY: y * scale.Y\n\t\t}\n\t\treturn realPosition;\n\t}\n\n\tresetMouseDrag(e) {\n\t\tthis._mouseX = e.clientX;\n\t\tthis._mouseY = e.clientY;\n\t}\n\t\n\tisDragStarted(e) {\n\t\tif (0 !== e.button) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!e.target.classList.contains('draggable')) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._dragNode = e.target.getAttribute(\"data-ref\");\n\t\tif (null === this._dragNode) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.resetMouseDrag(e);\n\n\t\t// get drag object\n\t\tthis._dragObjectType = DragObject.None;\n\t\tfor (const chk of DragObjectCheck ) {\n\t\t\tif (!this._dragNode.startsWith(chk.prefix)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthis._dragObjectType = chk.typ;\n\t\t\tif (chk.removePrefix) {\n\t\t\t\tthis._dragNode = this._dragNode.replace(chk.prefix,\"\");\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\t\n\tplayerEditStarted(editNode) {\n\t\tconst editPlayer = this.props.pitch.playerEditStart(editNode);\n\t\tif (null === editPlayer) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._playerDialogRef.current.openDialog(editPlayer);\n\t\treturn true;\n\t}\n\n\t// player edit dialog callback\n\tplayerEditDone(player) {\n\t\tthis.props.pitch.playerEditDone(player);\n\t}\n\n\tobjectDrag(posX, posY, deltaX, deltaY, snap) {\n\t\tconst p = this.props.pitch;\n\t\tswitch (this._dragObjectType) {\n\t\t\tcase DragObject.Player:\n\t\t\t\tp.playerMove(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.Ball:\n\t\t\t\tp.ballMove(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditTopLeft:\n\t\t\t\tp.editTopLeft(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditTopRight:\n\t\t\t\tp.editTopRight(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditBottomLeft:\n\t\t\t\tp.editBottomLeft(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditBottomRight:\n\t\t\t\tp.editBottomRight(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditMove:\n\t\t\t\tp.editMove(this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditRotate:\n\t\t\t\tp.editRotate(this._dragNode, posX, posY, snap);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineP1:\n\t\t\t\tp.lineEdit('p1', this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineC1:\n\t\t\t\tp.lineEdit('c1', this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineC2:\n\t\t\t\tp.lineEdit('c2', this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tcase DragObject.EditLineP2:\n\t\t\t\tp.lineEdit('p2', this._dragNode, deltaX, deltaY);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.log(\"Invalid drag object type\", this._dragObjectType, this._dragNode);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\thContextMenu(e) {\n\t\tif (this.props.drawMode.mode !== 'select') {\n\t\t\treturn;\n\t\t}\n\t\tlet id = e.target.getAttribute(\"data-ref\");\n\t\tif (null === id) {\n\t\t\treturn;\n\t\t}\n\t\tconst p = this.props.pitch;\n\t\tif (this.playerEditStarted(id)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (p.squareEditStart(id)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (p.ellipseEditStart(id)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (p.lineEditStart(id)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (p.textEditStart(id)) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\t}\n\n\thMouseDown(e) {\n\t\tlet pos = this.getRealPosition(e);\n\t\tconst dm = this.props.drawMode;\n\t\tconst p = this.props.pitch;\n\t\tswitch (dm.mode) {\n\t\t\tcase 'line':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._dragNode = p.lineCreate(\n\t\t\t\t\tpos.X, pos.Y, dm.color, dm.lineArrowStart, dm.lineArrowEnd, dm.lineDashed\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'square':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._dragNode = p.squareCreate(\n\t\t\t\t\tpos.X, pos.Y, dm.color, dm.lineDashed\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'ellipse':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._dragNode = p.ellipseCreate(\n\t\t\t\t\tpos.X, pos.Y, dm.color, dm.lineDashed\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._dragNode = p.textCreate(\n\t\t\t\t\tpos.X, pos.Y, dm.color, dm.textSize\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\tif (this.isDragStarted(e)) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\thMouseUp(e) {\n\t\te.preventDefault();\n\t\tconst p = this.props.pitch;\n\t\tlet pos = this.getRealPosition(e);\n\t\tlet isShift = e.getModifierState(\"Shift\");\n\t\tswitch (this.props.drawMode.mode) {\n\t\t\tcase 'line':\n\t\t\t\tp.lineCleanup();\n\t\t\t\tbreak;\n\t\t\tcase 'square':\n\t\t\t\tp.squareCleanup();\n\t\t\t\tbreak;\n\t\t\tcase 'ellipse':\n\t\t\t\tp.ellipseCleanup();\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\tbreak;\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\tlet scale = this.getScale();\n\t\t\t\tlet deltaX = (e.clientX - this._mouseX) * scale.X;\n\t\t\t\tlet deltaY = (e.clientY - this._mouseY) * scale.Y;\n\t\t\t\tthis.resetMouseDrag(e);\n\t\t\t\tthis.objectDrag(pos.X, pos.Y, deltaX, deltaY, isShift);\n\t\t\t\tbreak;\n\t\t}\n\t\t// Reset editing\n\t\tif (0 === e.button && this._dragObjectType === DragObject.None) {\n\t\t\tp.endAllEdits();\n\t\t}\n\t\tthis._dragNode = null;\n\t\tthis._dragObjectType = DragObject.None;\n\t}\n\n\thMouseMove(e) {\n\t\tif (null == this._dragNode) {\n\t\t\treturn;\n\t\t}\n\t\tconst p = this.props.pitch;\n\t\te.preventDefault();\n\t\tlet pos = this.getRealPosition(e);\n\t\tlet isShift = e.getModifierState(\"Shift\");\n\t\tswitch (this.props.drawMode.mode) {\n\t\t\tcase 'line':\n\t\t\t\tp.lineResize(this._dragNode, pos.X, pos.Y);\n\t\t\t\tbreak;\n\t\t\tcase 'square':\n\t\t\t\tp.squareResize(this._dragNode, pos.X, pos.Y, isShift);\n\t\t\t\tbreak;\n\t\t\tcase 'ellipse':\n\t\t\t\tp.ellipseResize(this._dragNode, pos.X, pos.Y, isShift);\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\tbreak;\n\t\t\tcase 'select':\n\t\t\tdefault:\n\t\t\t\tlet scale = this.getScale();\n\t\t\t\tlet deltaX = (e.clientX - this._mouseX) * scale.X;\n\t\t\t\tlet deltaY = (e.clientY - this._mouseY) * scale.Y;\n\t\t\t\tthis.resetMouseDrag(e);\n\t\t\t\tthis.objectDrag(pos.X, pos.Y, deltaX, deltaY, isShift);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\ttextEditDone(id, text, bx, by, bwidth, bheight) {\n\t\tthis.props.pitch.textEditDone(id, text, bx, by, bwidth, bheight);\n\t}\n\n\t// return current SVG in editor\n\t// TODO: Cleanup unused players and balls\n\tgetSVG() {\n\t\treturn {\n\t\t\twidth: this._orgWidth,\n\t\t\theight: this._orgHeight,\n\t\t\tsvgText: this._editRef.current.children[0].outerHTML\n\t\t}\n\t}\n\n\trenderPlayers(players) {\n\t\treturn players.map((pl, index) => {\n\t\t\treturn (\n\t\t\t\t<PlayerEdit key={index.toString()} player={pl} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderBalls(balls){\n\t\treturn balls.map((b, index) => {\n\t\t\treturn (\n\t\t\t\t<BallEdit key={index.toString()} ball={b} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderSquares(squares){\n\t\treturn squares.map((s, index) => {\n\t\t\treturn (\n\t\t\t\t<SquareEdit key={index.toString()} square={s} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderEllipses(ellipses){\n\t\treturn ellipses.map((el, index) => {\n\t\t\treturn (\n\t\t\t\t<EllipseEdit key={index.toString()} ellipse={el} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderLines(lines){\n\t\treturn lines.map((l, index) => {\n\t\t\treturn (\n\t\t\t\t<LineEdit key={index.toString()} line={l} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderTexts(texts){\n\t\treturn texts.map((tx, index) => {\n\t\t\treturn (\n\t\t\t\t<TextEdit key={index.toString()} text={tx} onEditDone={this.textEditDone} />\n\t\t\t);\n\t\t});\n\t}\n\n\trenderPitchOverlay(){\n\t\tconst o = this.props.pitch.overlaySize();\n\t\tif (null === o) {\n\t\t\treturn null;\n\t\t}\n\t\tconst posX = (this._orgWidth - o.width) / 2;\n\t\tconst posY = (this._orgHeight - o.height) / 2;\n\t\tconst transform = 'translate(' + posX + ' ' + posY + ')';\n\t\treturn (<rect width={o.width} height={o.height} transform={transform} fill=\"none\" />);\n\t}\n\n\tgeneratePicthStyles() {\n\t\tconst colors = this.props.drawMode.colorOptions.map((col, index) => {\n\t\t\treturn '.pc'+ index +' { fill: '+col+'; stroke: '+ col +'; }';\n\t\t});\n\n\t\treturn colors.concat([\n\t\t\t'.bc0 { fill: #ffa500; }',\n\t\t\t'.bc1 { fill: #cc3333; }',\n\t\t\t'.bc2 { fill: #222333; }',\n\t\t\t'.bc3 { fill: #0000ff; }',\n\t\t\t'.bc4 { fill: #ffffff; }',\n\t\t\t'.bc4 svg { fill: #000000; }',\n\t\t\t'#texts { font-family: sans-serif; font-size: 10em; cursor: default; user-select: none; }',\n\t\t\t'.txt0 text { font-size: 0.5em; }',\n\t\t\t'.txt1 text { font-size: 0.8em; }',\n\t\t\t'.txt2 text { font-size: 1em; }',\n\t\t\t'.txt3 text { font-size: 1.5em; }',\n\t\t\t'.txt4 text { font-size: 2em; }',\n\t\t\t'.player { pointer-events: none; }',\n\t\t\t'.player text { font-family: sans-serif; fill: black; }',\n\t\t\t'.player text.number { fill: white; }',\n\t\t\t'.dashed { stroke-dasharray: 20; }',\n\t\t\t'.square { stroke-width: 8; stroke-opacity: 1; fill-opacity: 0.6; }',\n\t\t\t'.ellipse { stroke-width: 8; stroke-opacity: 1; fill-opacity: 0.6; }',\n\t\t\t'.line { stroke-width: 12; }',\n\t\t\t'.line path { fill: none; stroke-width: 12; }',\n\t\t\t'.draggable { cursor: move; pointer-events: all;}',\n\t\t\t'.editBox { fill: none; stroke-width: 8; stroke-opacity: 1; }',\n\t\t\t'.editTransparent { fill: none; stroke-width: 0; }',\n\t\t\t'.editCorner { fill: red; stroke-width: 0; stroke-opacity: 1; }'\n\t\t]);\n\t}\n\n\trender() {\n\t\tconst viewBox = this.props.viewBoxLeft.toString() + ' ' + this.props.viewBoxTop.toString() + ' ' + this.props.viewBoxRight.toString() + ' ' + this.props.viewBoxBottom.toString()\n\n\t\t// default class is full screen width and height with padding for menu height\n\t\tconst pitchClasses = \"pitch \" + this.props.classes.offset;\n\n\t\t// Calculate pitch position in viewBox\n\t\tconst pitchLeft = (this._orgWidth - 4000) / 2; // Goals are relative to pitch no need to take them in calc\n\t\tconst pitchTop = (this._orgHeight - 2000) / 2;\n\t\tconst pitchTransform = 'translate(' + pitchLeft + ' ' + pitchTop + ')';\n\n\t\t// calculate players position in viewbox\n\t\tconst playersLeft = pitchLeft;\n\t\tconst playersTop = pitchTop + 2000 + 50;\n\t\tconst playersTransform = 'translate(' + playersLeft + ' ' + playersTop + ')';\n\n\t\t// calculate balls position in viewBox\n\t\tconst ballsLeft = pitchLeft + 1050\n\t\tconst ballsTop = pitchTop + 2000 + 100;\n\t\tconst ballsTransform = 'translate(' + ballsLeft + ' ' + ballsTop + ')'; // \"translate(1200 2210)\"\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t<div ref={this._editRef} className={pitchClasses}>\n\t\t\t\t<svg xmlns='http://www.w3.org/2000/svg' viewBox={viewBox} onContextMenu={this.hContextMenu} onMouseDown={this.hMouseDown} onMouseUp={this.hMouseUp} onMouseMove={this.hMouseMove}>\n\t\t\t\t\t<style>\n\t\t\t\t\t\t{this.generatePicthStyles()}\n\t\t\t\t\t</style>\n\t\t\t\t\t<pattern id=\"goal-net\" x=\"0\" y=\"0\" width=\"20\" height=\"20\" stroke=\"black\" patternUnits=\"userSpaceOnUse\">\n\t\t\t\t\t\t<line x1=\"0\" x2=\"20\" y1=\"0\" y2=\"20\" />\n\t\t\t\t\t\t<line x1=\"20\" x2=\"00\" y1=\"0\" y2=\"20\" />\n\t\t\t\t\t</pattern>\n\t\t\t\t\t<marker id=\"arrowEnd\" markerWidth=\"10\" markerHeight=\"10\" refX=\"0\" refY=\"3\" orient=\"auto\" markerUnits=\"strokeWidth\">\n\t\t\t\t\t\t<path d=\"M0,0 L0,6 L9,3 z\" fill=\"#f00\" />\n\t\t\t\t\t</marker>\n\t\t\t\t\t<marker id=\"arrowStart\" markerWidth=\"10\" markerHeight=\"10\" refX=\"0\" refY=\"3\" orient=\"auto\" markerUnits=\"strokeWidth\">\n\t\t\t\t\t\t<path d=\"M9,0 L9,6 L0,3 z\" fill=\"#f00\" />\n\t\t\t\t\t</marker>\n\t\t\t\t\t<g id=\"background\" ref={this._bgRef}>\n\t\t\t\t\t\t<rect width={this._orgWidth} height={this._orgHeight} fill=\"#b7b7b7\" fillOpacity=\"0.5\" />\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"pitch\" transform={pitchTransform} fill=\"#0280c6\" stroke=\"white\" strokeWidth=\"8\">\n\t\t\t\t\t\t<rect width=\"4000\" height=\"2000\" />\n\t\t\t\t\t\t<line x1=\"2000\" x2=\"2000\" y1=\"0\" y2=\"2000\" />\n\t\t\t\t\t\t<circle r=\"300\" cx=\"2000\" cy=\"1000\" fill=\"none\" />\n\t\t\t\t\t\t<circle r=\"12\" cx=\"2000\" cy=\"1000\" fill=\"white\" strokeWidth=\"0\" />\n\t\t\t\t\t\t<g id=\"corner_marks\">\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M25,0 a25,25 0 0,1 -25,25\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M4000,25 a25,25 0 0,1 -25,-25\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M0,1975 a25,25 0 0,1 25,25\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M3975,2000 a25,25 0 0,1 25,-25\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"substitition-zones\">\n\t\t\t\t\t\t\t<line x1=\"1000\" x2=\"1000\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t\t<line x1=\"1500\" x2=\"1500\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t\t<line x1=\"2500\" x2=\"2500\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t\t<line x1=\"3000\" x2=\"3000\" y1=\"-48\" y2=\"32\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"left\">\n\t\t\t\t\t\t\t<line x1=\"500\" x2=\"500\" y1=\"980\" y2=\"1020\" />\n\t\t\t\t\t\t\t<line x1=\"600\" x2=\"600\" y1=\"842\" y2=\"1158\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"600\" cy=\"1000\" fill=\"white\" strokeWidth=\"0\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M0,242 a600,600 0 0,1 600,600\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M600,1158 a600,600 0 0,1 -600,600\" />\n\t\t\t\t\t\t\t<line x1=\"-20\" x2=\"-60\" y1=\"500\" y2=\"500\" />\n\t\t\t\t\t\t\t<line x1=\"-20\" x2=\"-60\" y1=\"1500\" y2=\"1500\" />\n\t\t\t\t\t\t\t<g id=\"goal-left\">\n\t\t\t\t\t\t\t\t<rect width=\"100\" height=\"300\" x=\"-100\" y=\"850\" fill=\"url(#goal-net)\" stroke=\"#777777\" strokeWidth=\"4\" />\n\t\t\t\t\t\t\t\t<line x1=\"0\" x2=\"0\" y1=\"850\" y2=\"1150\" />\n\t\t\t\t\t\t\t\t<line x1=\"0\" x2=\"0\" y1=\"850\" y2=\"1150\" stroke=\"red\" strokeDasharray=\"20\" />\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"left-penalty\" fill=\"white\" strokeWidth=\"0\">\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"992\" y=\"492\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"1000\" cy=\"1000\"/>\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"992\" y=\"1492\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"right\">\n\t\t\t\t\t\t\t<line x1=\"3500\" x2=\"3500\" y1=\"980\" y2=\"1020\" />\n\t\t\t\t\t\t\t<line x1=\"3400\" x2=\"3400\" y1=\"842\" y2=\"1158\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"3400\" cy=\"1000\" fill=\"white\" strokeWidth=\"0\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M3400,842 a600,600 0 0,1 600,-600\" />\n\t\t\t\t\t\t\t<path fill=\"none\" d=\"M3400,1158 a600,600 0 0,0 600,600\" />\n\t\t\t\t\t\t\t<line x1=\"4020\" x2=\"4060\" y1=\"500\" y2=\"500\" />\n\t\t\t\t\t\t\t<line x1=\"4020\" x2=\"4060\" y1=\"1500\" y2=\"1500\" />\n\t\t\t\t\t\t\t<g id=\"goal-right\">\n\t\t\t\t\t\t\t\t<rect width=\"100\" height=\"300\" x=\"4000\" y=\"850\" fill=\"url(#goal-net)\" stroke=\"#777777\" strokeWidth=\"4\" />\n\t\t\t\t\t\t\t\t<line x1=\"4000\" x2=\"4000\" y1=\"850\" y2=\"1150\" />\n\t\t\t\t\t\t\t\t<line x1=\"4000\" x2=\"4000\" y1=\"850\" y2=\"1150\" stroke=\"red\" strokeDasharray=\"20\" />\n\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"right-penalty\" fill=\"white\" strokeWidth=\"0\">\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"2992\" y=\"492\" />\n\t\t\t\t\t\t\t<circle r=\"12\" cx=\"3000\" cy=\"1000\" />\n\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" x=\"2992\" y=\"1492\" />\n\t\t\t\t\t\t</g>\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"pitchOverlay\" stroke=\"white\" strokeWidth=\"8\">\n\t\t\t\t\t\t{this.renderPitchOverlay()}\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"ellipses\">{this.renderEllipses(this.props.pitch.ellipses)}</g>\n\t\t\t\t\t<g id=\"squares\">{this.renderSquares(this.props.pitch.squares)}</g>\n\t\t\t\t\t<g id=\"players\" transform={playersTransform} fontSize=\"50\">\n\t\t\t\t\t\t{this.renderPlayers(this.props.pitch.players)}\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"balls\" transform={ballsTransform}>\n\t\t\t\t\t\t{this.renderBalls(this.props.pitch.balls)}\n\t\t\t\t\t</g>\n\t\t\t\t\t<g id=\"lines\">{this.renderLines(this.props.pitch.lines)}</g>\n\t\t\t\t\t<g id=\"texts\">{this.renderTexts(this.props.pitch.texts)}</g>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t<PlayerDialog ref={this._playerDialogRef} onEditDone={this.playerEditDone} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nPitchEdit.defaultProps = {\n\tpitch: null,\n\tdrawMode: null,\n\tviewBoxLeft: 0,\n\tviewBoxTop: 0,\n\tviewBoxRight: 4500,\n\tviewBoxBottom: 2500\n}\n\nPitchEdit.propTypes = {\n\tpitch: PropTypes.instanceOf(PitchFutsal),\n\tdrawMode: PropTypes.instanceOf(DrawMode),\n\tviewBoxLeft: PropTypes.number,\n\tviewBoxTop: PropTypes.number,\n\tviewBoxRight: PropTypes.number,\n\tviewBoxBottom: PropTypes.number\n}\n\nexport default withStyles(styles, { withTheme: true })(PitchEdit);"]},"metadata":{},"sourceType":"module"}